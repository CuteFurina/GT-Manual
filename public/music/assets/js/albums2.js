import{_ as a}from"./Pagination.js";import{_ as e}from"./MainCover.js";import{a7 as t,r as s,w as u,e as r,g as l,G as o,k as i,j as n,T as m,n as p,i as d,L as v,a0 as c}from"./vendor.js";import{a as y,q as b}from"./index.js";import{d as g}from"./artist.js";import"./album2.js";import"./dj2.js";const f={class:"artist-albums"},j={key:0,class:"list"},z={__name:"albums",setup(z){const h=t(),q=y(),S=s(h.currentRoute.value.query.id),N=s(null),_=s(0),k=s(Number(h.currentRoute.value.query?.page)||1),w=async(a,e=q.loadSize,t=0)=>{try{N.value=null;const s=await g(a,e,t);if(_.value=s.artist.albumSize,0===_.value)return N.value="empty";N.value=b(s.hotAlbums,"album")}catch(s){console.error("获取歌手专辑失败：",s)}},C=a=>{h.push({path:"/artist/albums",query:{id:S.value,page:a}})};return u((()=>h.currentRoute.value),(async a=>{"ar-albums"===a.name&&(S.value=a.query.id,k.value=Number(a.query?.page)||1,await w(S.value,q.loadSize,(k.value-1)*q.loadSize))})),r((async()=>{await w(S.value,q.loadSize,(k.value-1)*q.loadSize)})),(t,s)=>{const u=e,r=a,y=c;return l(),o("div",f,[i(m,{name:"fade",mode:"out-in"},{default:n((()=>["empty"!==p(N)?(l(),o("div",j,[i(u,{data:p(N),type:"album"},null,8,["data"]),p(N)?.length?(l(),d(r,{key:0,totalCount:p(_),pageNumber:p(k),onPageNumberChange:C},null,8,["totalCount","pageNumber"])):v("",!0)])):(l(),d(y,{key:1,description:"当前歌手暂无专辑",class:"tip",style:{"margin-top":"60px"},size:"large"}))])),_:1})])}}};export{z as default};
