import{_ as e,g as a,E as l,C as s,q as t,e as o,f as n,m as i,s as d,P as r,Q as c,R as u,S as p,a as y,K as m,y as v,b as g,T as h}from"./index.js";import{a as f,s as k,r as _,g as w,i as b,j as C,P as S,k as D,n as P,T as x,R as $,J as z,K as I,G as L,X as T,L as j,Y as M,aG as A,aF as R,a1 as N,aH as q,ah as B,W as E,aw as V,aa as O,ac as U,ap as G,aq as F,a7 as J,M as X,O as Y,a4 as H,a5 as K,Z as W,au as Q,v as Z,w as ee,f as ae,a6 as le,U as se,V as te,at as oe,a0 as ne,aJ as ie}from"./vendor.js";import{_ as de}from"./Pagination.js";const re=(e=50,a=0)=>f({method:"GET",url:"/user/cloud",params:{limit:e,offset:a,timestamp:(new Date).getTime()}}),ce=(e,a)=>{const l=new FormData;return l.append("songFile",e),f({url:"/cloud",method:"POST",hiddenBar:!0,params:{timestamp:(new Date).getTime()},data:l,headers:{"Content-Type":"multipart/form-data"},timeout:2e5,onUploadProgress:a})},ue=(e=>(G("data-v-cf7e3199"),e=e(),F(),e))((()=>z("div",{class:"cover-loading"},[z("img",{class:"loading-img",src:n,alt:"loading-img"})],-1))),pe={class:"content"},ye={class:"name"},me={class:"artist"},ve={key:0,class:"all-ar"},ge={key:1,class:"all-ar"},he={class:"ar"},fe=e({__name:"CloudSongMatch",setup(e,{expose:n}){const i=a(),d=l(),{userData:r}=k(i),c=_(null),u=_(null),p=_(!1),y=_(null),m=_({uid:r.value?.userId,sid:null,asid:null}),v=async e=>{if(Number(e.sid)===Number(e.asid))return $message.warning("与原歌曲 ID 一致，无需修改");if(!y.value)return $message.warning("未检测到正确的匹配检查结果");const a=await(l=e.uid,s=e.sid,t=e.asid,f({method:"GET",url:"/cloud/match",params:{uid:l,sid:s,asid:t,timestamp:(new Date).getTime()}}));var l,s,t;if(200===a.code){try{y.value.pc=void 0;const e=await d.getfilesDB("userCloudList");e[u.value]=JSON.parse(JSON.stringify(y.value)),await d.setfilesDB("userCloudList",e.slice()),"undefined"!=typeof $refreshCloudCatch&&$refreshCloudCatch()}catch(o){console.error("更改云盘列表时出错：",o),$message.error("更改云盘列表时出错，请刷新后重试")}g(),$message.success("歌曲信息纠正成功")}else $message.error("歌曲信息纠正失败，请重试")},g=()=>{p.value=!1,c.value=null,m.value.asid=null,y.value=null};return n({openCloudSongMatch:(e,a)=>{u.value=a,m.value.sid=e.id,p.value=!0}}),(e,a)=>{const l=A,n=R,i=N,d=q,r=B,c=o,u=E,h=V,f=O,k=U;return w(),b(k,{show:P(p),"onUpdate:show":a[5]||(a[5]=e=>M(p)?p.value=e:null),bordered:!1,"on-after-leave":g,title:"歌曲纠正",preset:"card"},{footer:C((()=>[D(f,{justify:"end"},{default:C((()=>[D(i,{onClick:g},{default:C((()=>[S(" 取消 ")])),_:1}),D(i,{disabled:!P(m).asid,type:"primary",onClick:a[4]||(a[4]=e=>v(P(m)))},{default:C((()=>[S(" 纠正 ")])),_:1},8,["disabled"])])),_:1})])),default:C((()=>[D(d,{class:"cloud-match","label-width":80,model:P(m)},{default:C((()=>[D(n,{label:"原歌曲 ID",path:"asid"},{default:C((()=>[D(l,{value:P(m).sid,"onUpdate:value":a[0]||(a[0]=e=>P(m).sid=e),"show-button":!1,disabled:""},null,8,["value"])])),_:1}),D(n,{label:"匹配的 ID",path:"asid"},{default:C((()=>[D(l,{value:P(m).asid,"onUpdate:value":a[1]||(a[1]=e=>P(m).asid=e),"show-button":!1,placeholder:"请输入要匹配的歌曲 ID"},null,8,["value"]),D(i,{disabled:!P(m).asid,style:{"margin-left":"12px"},onClick:a[2]||(a[2]=e=>(async e=>{try{if(!e)return!1;const a=e.toString(),l=await s(a);200===l.code&&l.songs.length>0?($message.success("匹配的歌曲检查通过"),y.value=t(l.songs[0],"song")[0]):$message.warning("请检查要匹配的歌曲 ID 是否正确")}catch(a){console.error("检查纠正歌曲失败：",a),$message.error("检查纠正歌曲失败，请重试")}})(P(m).asid))},{default:C((()=>[S(" 检查 ")])),_:1},8,["disabled"])])),_:1})])),_:1},8,["model"]),D(x,{name:"fade",mode:"out-in"},{default:C((()=>[P(y)?(w(),b(h,{key:P(y),"content-style":{display:"flex",flexDirection:"row",alignItems:"center",padding:"16px",height:"100%"},class:"song-detail"},{default:C((()=>[D(r,{src:P(y)?.coverSize?.s||P(y)?.cover,class:"cover-img","preview-disabled":"",onLoad:a[3]||(a[3]=e=>{e.target.style.opacity=1})},{placeholder:C((()=>[ue])),_:1},8,["src"]),z("div",pe,[z("div",ye,$(P(y)?.name||"未知曲目"),1),z("div",me,[D(u,{depth:"3",size:"20"},{default:C((()=>[D(c,{icon:"account-music"})])),_:1}),P(y)?.artists&&Array.isArray(P(y)?.artists)?(w(),L("div",ve,[(w(!0),L(I,null,T(P(y).artists,(e=>(w(),L("span",{key:e.id,class:"ar"},$(e.name),1)))),128))])):(w(),L("div",ge,[z("span",he,$(P(y)?.artists||"未知艺术家"),1)]))])])])),_:1})):j("",!0)])),_:1})])),_:1},8,["show"])}}},[["__scopeId","data-v-cf7e3199"]]),ke={key:0,class:"song-data"},_e={class:"song-detail"},we={key:0,class:"all-ar"},be={key:1,class:"all-ar"},Ce={class:"all-menu"},Se=e({__name:"SongListDrawer",emits:["playSong","delCloudSong","deletePlaylistSong","delLocalSong"],setup(e,{expose:l,emit:s}){const t=J(),n=a(),p=i(),y=d(),{playMode:m}=k(y),{userData:v,userLikeData:g}=k(n),h=s,f=_(null),x=_(null),A=_(null),R=_(!1),N=_("song"),q=_(null),V=_(null),O=_(null),U=_(null),G=X((()=>"fm"===m.value)),F=X((()=>"song"===N.value)),W=X((()=>!!q.value?.path)),Q=X((()=>!!q.value?.mv&&0!==q.value.mv)),Z=X((()=>"cloud"===t.currentRoute.value.name)),ee=X((()=>{const e=v.value?.userId,a=g.value.playlists?.filter((a=>a.userId===e));return 0!==O.value&&a.some((e=>e.id==O.value))}));return l({drawerOpen:(e,a,l,s,t)=>{R.value=!0,q.value=a,N.value=t,V.value=l,O.value=s,U.value=e}}),(e,a)=>{const l=B,s=Y,n=o,i=E,d=H,y=K,v=c,g=u,k=fe;return w(),L(I,null,[D(y,{show:P(R),"onUpdate:show":a[9]||(a[9]=e=>M(R)?R.value=e:null),"auto-focus":!1,height:"calc(100vh - 200px)",placement:"bottom",class:"song-list-drawer",onAfterLeave:a[10]||(a[10]=e=>R.value=!1),onMaskClick:a[11]||(a[11]=e=>R.value=!1)},{default:C((()=>[D(d,{"native-scrollbar":!1,"body-content-style":{padding:0},closable:""},{header:C((()=>[P(q)?.path?(w(),b(s,{key:1},{default:C((()=>[S("更多操作")])),_:1})):(w(),L("div",ke,[D(l,{src:P(q)?.coverSize?.s||P(q)?.cover,class:"cover","preview-disabled":""},null,8,["src"]),z("div",_e,[D(s,{class:"name"},{default:C((()=>[S($(P(q)?.name||"未知曲目"),1)])),_:1}),"song"===P(N)?(w(),L(I,{key:0},[P(q)?.artists&&Array.isArray(P(q).artists)?(w(),L("div",we,[(w(!0),L(I,null,T(P(q).artists,(e=>(w(),b(s,{key:e.id,class:"ar",depth:"3"},{default:C((()=>[S($(e.name),1)])),_:2},1024)))),128))])):(w(),L("div",be,[D(s,{class:"ar",depth:"3"},{default:C((()=>[S($(P(q).artists||"未知艺术家"),1)])),_:1})]))],64)):(w(),b(s,{key:1,class:"ar"},{default:C((()=>[S($(P(q)?.artists||"未知艺术家"),1)])),_:1}))])]))])),default:C((()=>[z("div",Ce,[z("div",{class:"menu-item",onClick:a[0]||(a[0]=()=>{R.value=!1,h("playSong",P(U),P(q),P(V))})},[D(i,{size:"22"},{default:C((()=>[D(n,{icon:"play"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 立即播放 ")])),_:1})]),P(F)&&"dj"!==P(m)&&P(p).getPlaySongData?.id!==P(q).id&&!P(G)?(w(),L("div",{key:0,class:"menu-item",onClick:a[1]||(a[1]=()=>{R.value=!1,m.value="normal",P(r)(P(q))})},[D(i,{size:"22"},{default:C((()=>[D(n,{icon:"play-next"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 下一首播放 ")])),_:1})])):j("",!0),P(F)&&!P(W)?(w(),L("div",{key:1,class:"menu-item",onClick:a[2]||(a[2]=()=>{R.value=!1,P(f)?.openAddToPlaylist(P(q)?.id)})},[D(i,{size:"22"},{default:C((()=>[D(n,{icon:"playlist-add"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 添加到歌单 ")])),_:1})])):j("",!0),P(F)&&!P(W)?(w(),L("div",{key:2,class:"menu-item",onClick:a[3]||(a[3]=()=>{R.value=!1,P(t).push({path:"/comment",query:{id:P(q).id}})})},[D(i,{size:"20"},{default:C((()=>[D(n,{icon:"comment-text"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 查看评论 ")])),_:1})])):j("",!0),P(F)&&P(Q)?(w(),L("div",{key:3,class:"menu-item",onClick:a[4]||(a[4]=()=>{R.value=!1,P(t).push({path:"/videos-player",query:{id:P(q).mv}})})},[D(i,{size:"22"},{default:C((()=>[D(n,{icon:"video"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 观看 MV ")])),_:1})])):j("",!0),!P(Z)&&P(ee)?(w(),L("div",{key:4,class:"menu-item",onClick:a[5]||(a[5]=()=>{R.value=!1,h("deletePlaylistSong",P(O),P(q),P(U),P(V))})},[D(i,{size:"22"},{default:C((()=>[D(n,{icon:"delete"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 从歌单中删除 ")])),_:1})])):j("",!0),P(Z)?(w(),L("div",{key:5,class:"menu-item",onClick:a[6]||(a[6]=()=>{R.value=!1,h("delCloudSong",P(U),P(q),P(V))})},[D(i,{size:"22"},{default:C((()=>[D(n,{icon:"delete"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 从云盘中删除 ")])),_:1})])):j("",!0),P(Z)?(w(),L("div",{key:6,class:"menu-item",onClick:a[7]||(a[7]=()=>{R.value=!1,P(A)?.openCloudSongMatch(P(q),P(V))})},[D(i,{size:"22"},{default:C((()=>[D(n,{icon:"edit"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 云盘歌曲纠正 ")])),_:1})])):j("",!0),P(F)&&!P(W)?(w(),L("div",{key:7,class:"menu-item",onClick:a[8]||(a[8]=()=>{R.value=!1,P(x)?.openDownloadModal(P(q))})},[D(i,{size:"22"},{default:C((()=>[D(n,{icon:"download"})])),_:1}),D(s,{class:"name"},{default:C((()=>[S(" 下载歌曲 ")])),_:1})])):j("",!0)])])),_:1})])),_:1},8,["show"]),D(v,{ref_key:"addPlaylistRef",ref:f},null,512),D(g,{ref_key:"downloadSongRef",ref:x},null,512),D(k,{ref_key:"cloudSongMatchRef",ref:A},null,512)],64)}}},[["__scopeId","data-v-c08c0153"]]),De={__name:"SongListDropdown",emits:["playSong","delCloudSong","deletePlaylistSong","delLocalSong"],setup(e,{expose:l,emit:s}){const t=s,n=a(),y=i(),m=J(),v=d(),{playMode:g}=k(v),{userData:h,userLikeData:f}=k(n),b=_(0),C=_(0),S=_(!1),x=_(null),$=_(null),z=_(null),T=_(null),j=(e,a,l=0)=>()=>Z(E,{size:a??"18",style:{transform:`translateX(2px) translateY(${l}px)`}},(()=>Z(o,{icon:e}))),M=(e,a)=>()=>Z("div",{className:"song-data"},[Z(B,{src:e?.coverSize?.s||e?.cover,class:"cover",previewDisabled:!0}),Z("div",{class:"song-detail"},[Z(Y,{class:"name"},(()=>[e?.name||"未知曲目"])),a?e.artists&&Array.isArray(e.artists)?Z("div",{class:"all-ar"},e.artists.map((e=>Z(Y,{key:e.id,class:"ar",depth:3},(()=>[e.name]))))):Z("div",{class:"all-ar"},Z(Y,{class:"ar",depth:3},(()=>[e.artists||"未知艺术家"]))):Z(Y,{class:"ar",depth:3},(()=>["电台节目"]))])]);return l({openDropdown:(e,a,l,s,o,n)=>{try{e.preventDefault(),S.value=!1;const i=h.value?.userId,d=f.value.playlists?.filter((e=>e.userId===i)),c="fm"===g.value,u="song"===n,v=!!l?.path,k=!!l?.mv&&0!==l.mv,_="cloud"===m.currentRoute.value.name,w=0!==o&&d.some((e=>e.id==o));W().then((()=>{x.value=[{key:"song-data",type:"render",show:!v,render:M(l,u)},{key:"line-song",type:"divider",show:!v},{key:"play",label:"立即播放",props:{onClick:()=>{t("playSong",a,l,s)}},icon:j("play",20)},{key:"next-play",label:"下一首播放",show:u&&"dj"!==g.value&&y.getPlaySongData?.id!==l.id&&!c,props:{onClick:()=>{g.value="normal",r(l)}},icon:j("play-next")},{key:"add-pl",label:"添加到歌单",show:u&&!v,props:{onClick:()=>{$.value?.openAddToPlaylist(l?.id)}},icon:j("playlist-add",20)},{key:"comment",label:"查看评论",show:u&&!v,props:{onClick:()=>{m.push({path:"/comment",query:{id:l.id}})}},icon:j("comment-text",18,1)},{key:"mv",label:"观看 MV",show:u&&k,props:{onClick:()=>{m.push({path:"/videos-player",query:{id:l.mv}})}},icon:j("video")},{label:"更多操作",key:"others",show:!v,icon:j("more"),children:[{key:"copy",label:`复制${u?"歌曲":"节目"} ID`,props:{onClick:()=>{const e=l?.id?.toString();p(e)}},icon:j("content-copy")},{key:"share",label:`分享${u?"歌曲":"节目"}链接`,props:{onClick:()=>{const e=u?`https://music.163.com/song?id=${l?.id?.toString()}`:`https://music.163.com/#/dj?id=${l?.id?.toString()}`;p(e,`复制${u?"歌曲":"节目"}链接`)}},icon:j("share")}]},{key:"line-cloud",type:"divider",show:_||w||v},{key:"delete",label:"从歌单中删除",show:!_&&w,props:{onClick:()=>{t("deletePlaylistSong",o,l,a,s)}},icon:j("delete")},{key:"edit",label:"云盘歌曲纠正",show:_,props:{onClick:()=>{T.value?.openCloudSongMatch(l,s)}},icon:j("edit")},{key:"delete",label:"从云盘中删除",show:_,props:{onClick:()=>{t("delCloudSong",a,l,s)}},icon:j("delete")},{key:"open-local",label:"打开歌曲所在目录",show:v,props:{onClick:()=>{electron.ipcRenderer.send("openSongLocal",l?.path)}},icon:j("folder-music")},{key:"delete",label:"从本地磁盘中删除",show:v&&y.getPlaySongData?.id!==l.id,props:{onClick:()=>{t("delLocalSong",a,l,s)}},icon:j("delete")},{key:"line-search",type:"divider"},{key:"search",label:"同名搜索",props:{onClick:()=>{m.push({path:"/search/songs",query:{keywords:l.name}})}},icon:j("search-rounded",20,1)},{key:"download",label:"下载歌曲",show:u&&!v,props:{onClick:()=>{z.value?.openDownloadModal(l)}},icon:j("download",20,1)}],S.value=!0,b.value=e.clientX,C.value=e.clientY}))}catch(i){console.error("右键菜单出现异常：",i),$message.warning("右键菜单出现异常")}}}),(e,a)=>{const l=Q,s=c,t=u,o=fe;return w(),L(I,null,[D(l,{x:P(b),y:P(C),show:P(S),options:P(x),class:"song-list-dropdown",placement:"bottom-start",trigger:"manual",size:"large",onSelect:a[0]||(a[0]=e=>S.value=!1),onClickoutside:a[1]||(a[1]=e=>S.value=!1)},null,8,["x","y","show","options"]),D(s,{ref_key:"addPlaylistRef",ref:$},null,512),D(t,{ref_key:"downloadSongRef",ref:z},null,512),D(o,{ref_key:"cloudSongMatchRef",ref:T},null,512)],64)}}},Pe={key:0,class:"song-list"},xe={key:0,class:"song-list-header"},$e={key:2,class:"cover"},ze=(e=>(G("data-v-2b0e451c"),e=e(),F(),e))((()=>z("div",{class:"cover-loading"},[z("img",{class:"loading-img",src:n,alt:"song"})],-1))),Ie={class:"info"},Le={class:"title"},Te={key:0,class:"artist"},je={key:1,class:"artist"},Me={key:2,class:"artist"},Ae={key:4,class:"action"},Re={key:3,class:"loading"},Ne=e({__name:"SongList",props:{type:{type:String,default:"song"},data:{type:[Array,String],default:()=>[]},sourceId:{type:[Number,String],default:0},showCover:{type:Boolean,default:!0},showPagination:{type:Boolean,default:!0},showPrivilege:{type:Boolean,default:!0},showAlbum:{type:Boolean,default:!0},showTitle:{type:Boolean,default:!0}},setup(e){const l=J(),s=i(),t=a(),n=d(),c=y(),{userData:u}=k(t),{loadSize:p,playSearch:M,useMusicCache:A}=k(c),{playList:R,playSongData:N,playSongSource:q}=k(s),{playIndex:O,playMode:U,playHeartbeatMode:G,playLoading:F}=k(n),H=e,K=_(1),Q=_(null),Z=_(null),re=X((()=>((H.showPagination?K.value:Number(l.currentRoute.value.query?.page)||1)-1)*p.value)),ce=_(null),ue=(e=null)=>{const a=document.querySelector(".songs.play");"scroll"===e&&a&&a?.scrollIntoView({behavior:"smooth",block:"center"}),ce.value=!!a},pe=async(e,a,t)=>{if(A.value&&F.value)return $message.warning("歌曲正在缓冲中，请稍后"),!1;U.value="song"===H.type?"normal":"dj";const o=l.currentRoute.value.matched?.[0].path||null;"/like-songs"!==o&&(G.value=!1),s.getPlaySongData?.id===a?.id?v():("/search"===o&&!M.value||"/history"===o||G.value?r(a,!0):(R.value=e.slice(),O.value=t),N.value=a,await g(!0)),q.value=Number(H.sourceId),W().then((()=>ue()))},ye=e=>{K.value=e,W().then((()=>{const e=document.getElementById("main-layout");e?.scrollIntoView({behavior:"smooth"}),ue()}))},me=(e,a,l)=>{$dialog.warning({title:"确认删除",content:`确认从云盘中删除 ${a.name}？该操作无法撤销！`,positiveText:"删除",negativeText:"取消",onPositiveClick:async()=>{var s;200==(await(s=a.id,f({method:"GET",url:"/user/cloud/del",params:{id:s,timestamp:(new Date).getTime()}}))).code?(e.splice(l,1),$message.success("删除成功")):$message.error("删除失败，请重试")}})},ve=(e,a,l,s)=>{if(!e||!a)return $message.error("无法正确定位到歌单，请重试");$dialog.warning({title:"确认删除",content:`确认从歌单中移除 ${a.name}？该操作无法撤销！`,positiveText:"删除",negativeText:"取消",onPositiveClick:async()=>{200===(await h(e,a?.id,"del")).status?(1===l.length?l.splice(0,1,"empty"):l.splice(s,1),$message.success("歌曲删除成功")):$message.error("歌曲删除失败，请重试")}})},ge=(e,a,l)=>{$dialog.warning({title:"确认删除",content:`确认从本地磁盘中删除 ${a.name}？该操作无法撤销！`,positiveText:"删除",negativeText:"取消",onPositiveClick:async()=>{await electron.ipcRenderer.invoke("deleteFile",a?.path)?(1===e.length?e.splice(0,1,"empty"):e.splice(l,1),$message.success("歌曲删除成功")):$message.error("歌曲删除失败，请重试")}})};return ee((()=>s.getPlaySongData?.id),(()=>W().then((()=>ue())))),ae((()=>{ue()})),le((()=>{ce.value=!1})),(a,n)=>{const i=Y,d=o,r=E,c=B,y=oe,v=V,g=de,h=De,f=Se,k=ne,_=ie;return w(),b(x,{name:"fade",mode:"out-in",onAfterEnter:ue},{default:C((()=>[e.data?.[0]?.id?(w(),L("div",Pe,[e.showTitle?(w(),L("div",xe,[D(i,{class:"num",depth:"3"},{default:C((()=>[S(" # ")])),_:1}),D(i,{class:se(["info",{"has-cover":e.data[0].cover&&e.showCover}]),depth:"3"},{default:C((()=>[S($("song"===e.type?"歌曲":"声音"),1)])),_:1},8,["class"]),e.data[0].album&&e.showAlbum?(w(),b(i,{key:0,class:"album hidden",depth:"3"},{default:C((()=>[S(" 专辑 ")])),_:1})):j("",!0),e.data[0].updateTime&&"dj"===e.type?(w(),b(i,{key:1,class:"update hidden",depth:"3"},{default:C((()=>[S(" 更新日期 ")])),_:1})):j("",!0),"dj"!==e.type?(w(),b(i,{key:2,class:"control"})):j("",!0),e.data[0].playCount&&"dj"===e.type?(w(),b(i,{key:3,class:"count hidden",depth:"3"},{default:C((()=>[S(" 播放量 ")])),_:1})):j("",!0),e.data[0].duration?(w(),b(i,{key:4,class:"duration hidden",depth:"3"},{default:C((()=>[S(" 时长 ")])),_:1})):j("",!0),e.data[0].size?(w(),b(i,{key:5,class:"size hidden",depth:"3"},{default:C((()=>[S(" 大小 ")])),_:1})):j("",!0)])):j("",!0),(w(!0),L(I,null,T(e.data.slice((P(K)-1)*P(p),(P(K)-1)*P(p)+P(p)),((a,o)=>(w(),b(v,{id:"song-list-"+o,key:o,"content-style":{padding:"16px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},class:se(P(s).getPlaySongData?.id===a?.id?"songs play":"songs"),hoverable:"",onClick:l=>((e,a,l)=>{if(window.innerWidth>700)return!1;pe(e,a,l)})(e.data,a,P(re)+o),onDblclick:te((l=>pe(e.data,a,P(re)+o)),["stop"]),onContextmenu:l=>P(Z)?.openDropdown(l,e.data,a,P(re)+o,e.sourceId,e.type)},{default:C((()=>[P(s).getPlaySongData?.id!==a?.id?(w(),b(i,{key:0,class:"num",depth:"3"},{default:C((()=>[S($(P(re)+o+1),1)])),_:2},1024)):(w(),b(r,{key:1,class:"num",size:"22"},{default:C((()=>[D(d,{icon:"music-note"})])),_:1})),a.cover&&e.showCover?(w(),L("div",$e,[D(c,{src:a.coverSize.s,class:"cover-img","preview-disabled":"",lazy:"",onLoad:n[0]||(n[0]=e=>{e.target.style.opacity=1})},{placeholder:C((()=>[ze])),_:2},1032,["src"])])):j("",!0),z("div",Ie,[z("div",Le,[D(i,{class:"name",depth:"2"},{default:C((()=>[S($(a?.name||"未知曲目"),1)])),_:2},1024),e.showPrivilege&&1===a.fee&&11!==P(u).detail?.profile?.vipType?(w(),b(y,{key:0,bordered:!1,type:"error",size:"small",round:""},{default:C((()=>[S(" VIP ")])),_:1})):j("",!0),e.showPrivilege&&4===a.fee?(w(),b(y,{key:1,bordered:!1,type:"error",size:"small",round:""},{default:C((()=>[S(" EP ")])),_:1})):j("",!0),e.showPrivilege&&a.pc?(w(),b(y,{key:2,bordered:!1,class:"cloud",type:"info",size:"small",round:""},{icon:C((()=>[D(r,null,{default:C((()=>[D(d,{icon:"cloud"})])),_:1})])),_:1})):j("",!0),a?.mv?(w(),b(y,{key:3,bordered:!1,class:"mv",type:"warning",size:"small",round:"",onClick:te((e=>P(l).push(`/videos-player?id=${a.mv}`)),["stop"])},{default:C((()=>[S(" MV ")])),_:2},1032,["onClick"])):j("",!0)]),Array.isArray(a.artists)?(w(),L("div",Te,[(w(!0),L(I,null,T(a.artists,(e=>(w(),b(i,{key:e.id,class:"ar",onClick:te((a=>P(l).push(`/artist?id=${e.id}`)),["stop"]),onDblclick:n[1]||(n[1]=te((()=>{}),["stop"]))},{default:C((()=>[S($(e.name),1)])),_:2},1032,["onClick"])))),128))])):"dj"===e.type?(w(),L("div",je,[D(i,{class:"ar",onDblclick:n[2]||(n[2]=te((()=>{}),["stop"]))},{default:C((()=>[S(" 电台节目 ")])),_:1})])):(w(),L("div",Me,[D(i,{class:"ar",onDblclick:n[3]||(n[3]=te((()=>{}),["stop"]))},{default:C((()=>[S($(a.artists||"未知艺术家"),1)])),_:2},1024)])),a.alia?(w(),b(i,{key:3,class:"alia",depth:"3"},{default:C((()=>[S($(a.alia),1)])),_:2},1024)):j("",!0)]),e.showAlbum&&"dj"!==e.type?(w(),L(I,{key:3},[a.album?(w(),b(i,{key:0,class:"album hidden",onClick:te((e=>"object"==typeof a.album?P(l).push(`/album?id=${a.album.id}`):null),["stop"]),onDblclick:n[4]||(n[4]=te((()=>{}),["stop"]))},{default:C((()=>[S($("object"==typeof a.album?a.album?.name||"未知专辑":a.album),1)])),_:2},1032,["onClick"])):(w(),b(i,{key:1,class:"album hidden"},{default:C((()=>[S("未知专辑")])),_:1}))],64)):j("",!0),"dj"!==e.type?(w(),L("div",Ae,[D(r,{depth:P(t).getSongIsLike(a?.id)?0:3,class:"favorite",size:"20",onClick:te((e=>P(t).changeLikeList(a?.id,!P(t).getSongIsLike(a?.id),a?.path)),["stop"]),onDblclick:n[5]||(n[5]=te((()=>{}),["stop"]))},{default:C((()=>[D(d,{icon:P(t).getSongIsLike(a?.id)?"favorite-rounded":"favorite-outline-rounded"},null,8,["icon"])])),_:2},1032,["depth","onClick"]),D(r,{class:"more mobile",depth:"3",size:"20",onClick:te((l=>P(Q)?.drawerOpen(e.data,a,P(re)+o,e.sourceId,e.type)),["stop"]),onDblclick:n[6]||(n[6]=te((()=>{}),["stop"]))},{default:C((()=>[D(d,{icon:"more"})])),_:2},1032,["onClick"])])):j("",!0),"dj"===e.type&&a.updateTime?(w(),b(i,{key:5,class:"update hidden",depth:"3"},{default:C((()=>[S($(P(m)(a.updateTime,!1)),1)])),_:2},1024)):j("",!0),"dj"===e.type&&a.playCount?(w(),b(i,{key:6,class:"count hidden",depth:"3"},{default:C((()=>[S($(a.playCount)+"次 ",1)])),_:2},1024)):j("",!0),a.duration?(w(),b(i,{key:7,class:"duration hidden",depth:"3"},{default:C((()=>[S($(a.duration),1)])),_:2},1024)):(w(),b(i,{key:8,class:"duration"},{default:C((()=>[S(" -- ")])),_:1})),a.size?(w(),b(i,{key:9,class:"size hidden",depth:"3"},{default:C((()=>[S($(a.size)+"M",1)])),_:2},1024)):j("",!0)])),_:2},1032,["id","class","onClick","onDblclick","onContextmenu"])))),128)),e.data.length>=P(p)&&e.showPagination?(w(),b(g,{key:1,totalCount:e.data.length,pageNumber:P(K),onPageNumberChange:ye},null,8,["totalCount","pageNumber"])):j("",!0),D(h,{ref_key:"songListDropdownRef",ref:Z,onPlaySong:pe,onDelCloudSong:me,onDeletePlaylistSong:ve,onDelLocalSong:ge},null,512),D(f,{ref_key:"songListDrawerRef",ref:Q,onPlaySong:pe,onDelCloudSong:me,onDeletePlaylistSong:ve,onDelLocalSong:ge},null,512),D(x,{name:"shrink",mode:"out-in"},{default:C((()=>[P(ce)?(w(),b(v,{key:0,bordered:!1,"content-style":{padding:"0px",display:"flex",alignItems:"center",justifyContent:"center"},class:"scroll-to-song",onClick:n[7]||(n[7]=e=>ue("scroll"))},{default:C((()=>[D(r,{size:"26"},{default:C((()=>[D(d,{icon:"location"})])),_:1})])),_:1})):j("",!0)])),_:1})])):"empty"===e.data||"empty"===e.data?.[0]?(w(),b(k,{key:1,description:"空空如也，怎么一首歌都没有啊",style:{"margin-top":"60px"},size:"large"})):"error"===e.data||"error"===e.data?.[0]?(w(),b(k,{key:2,description:"列表获取出错，请重试",style:{"margin-top":"60px"},size:"large"})):(w(),L("div",Re,[D(_,{repeat:10,text:""})]))])),_:1})}}},[["__scopeId","data-v-2b0e451c"]]);export{Ne as _,re as g,ce as u};
