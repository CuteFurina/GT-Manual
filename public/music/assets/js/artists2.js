import{_ as a}from"./MainCover.js";import{a7 as e,r as s,w as t,f as l,g as r,G as u,J as o,k as i,j as n,n as d,i as v,L as c,aa as y,K as m,X as p,U as f,P as k,R as g,at as h,a1 as _}from"./vendor.js";import{_ as j,a as C,q as b}from"./index.js";import{g as q}from"./artist.js";import"./album2.js";import"./dj2.js";const R={class:"dsc-artists"},$={class:"menu"},z=j({__name:"artists",setup(j){const z=e(),S=C(),w=[{key:-1,value:"热门"},...Array.from({length:26},((a,e)=>String.fromCharCode(e+65))).map((a=>({key:a,value:a}))),{key:0,value:"#"}],x=s(z.currentRoute.value.query?.initial||w[0].key),M=["全部",...["华语","欧美","日本","韩国"].flatMap((a=>[`${a}`,`${a}男`,`${a}女`,`${a}组合`])),"其他"],N=[-1,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1,1,2,3,-1],A=[-1,7,7,7,7,96,96,96,96,8,8,8,8,16,16,16,16,0],G=s(Number(z.currentRoute.value.query?.type)||0),I=s([]),J=s(0),K=s(!1),L=s(!1),P=(a=N[G.value]||-1,e=A[G.value]||-1,s=J.value,t=x.value,l=S.loadSize)=>{q(a,e,s,t,l).then((a=>{a.more?K.value=!0:K.value=!1,L.value=!1,I.value.push(...b(a.artists,"artist"))}))},U=()=>{L.value=!0,J.value+=S.loadSize,P()};return t((()=>z.currentRoute.value),(a=>{"dsc-artists"===a.name&&(I.value=[],J.value=0,G.value=Number(a.query?.type)||0,x.value=a.query?.initial||w[0].key,P(N[G.value],A[G.value],J.value,x.value))})),l((()=>{P()})),(e,s)=>{const t=h,l=y,j=a,C=_;return r(),u("div",R,[o("div",$,[i(l,{class:"initial"},{default:n((()=>[(r(),u(m,null,p(w,(a=>i(t,{key:a,bordered:!1,class:f(["tag",{choose:a.key==d(x)}]),round:"",onClick:e=>{return s=a.key,void z.push({path:"/discover/artists",query:{type:G.value,initial:s,page:1}});var s}},{default:n((()=>[k(g(a.value),1)])),_:2},1032,["class","onClick"]))),64))])),_:1}),i(l,{class:"category"},{default:n((()=>[(r(),u(m,null,p(M,((a,e)=>i(t,{key:a,class:f(["tag",a.length>2?"hidden":"show",{choose:e==d(G)}]),bordered:!1,round:"",onClick:a=>{return s=e,void z.push({path:"/discover/artists",query:{type:s,initial:x.value,page:1}});var s}},{default:n((()=>[k(g(a),1)])),_:2},1032,["class","onClick"]))),64))])),_:1})]),i(j,{data:d(I),columns:"3 s:4 m:5 l:6",type:"artist"},null,8,["data"]),d(K)?(r(),v(l,{key:0,justify:"center"},{default:n((()=>[i(C,{loading:d(L),class:"load-more",size:"large",strong:"",secondary:"",round:"",onClick:U},{default:n((()=>[k(" 加载更多 ")])),_:1},8,["loading"])])),_:1})):c("",!0)])}}},[["__scopeId","data-v-81b9b529"]]);export{z as default};
