import{_ as a}from"./Pagination.js";import{_ as e}from"./SongList.js";import{a7 as s,r as t,w as o,e as r,g as n,G as u,k as i,j as l,T as m,n as g,i as p,L as d,a0 as c}from"./vendor.js";import{a as v,C as y,q as f}from"./index.js";import{c as j}from"./artist.js";const h={class:"artist-songs"},q={key:0,class:"list"},w={__name:"songs",setup(w){const z=s(),S=v(),b=t(z.currentRoute.value.query.id),N=t(null),_=t(0),k=t(Number(z.currentRoute.value.query?.page)||1),C=async(a,e=S.loadSize,s=0)=>{try{const t=await j(a,e,s);if(_.value=t.total,0===_.value)return N.value="empty";const o=t.songs.map((a=>a.id)).join(","),r=await y(o);N.value=f(r.songs,"song")}catch(t){console.error("获取歌手全部歌曲失败：",t)}},x=a=>{z.push({path:"/artist/songs",query:{id:b.value,page:a}})};return o((()=>z.currentRoute.value),(async a=>{"ar-songs"===a.name&&(b.value=a.query.id,k.value=Number(a.query?.page)||1,await C(b.value,S.loadSize,(k.value-1)*S.loadSize))})),r((async()=>{await C(b.value,S.loadSize,(k.value-1)*S.loadSize)})),(s,t)=>{const o=e,r=a,v=c;return n(),u("div",h,[i(m,{name:"fade",mode:"out-in"},{default:l((()=>["empty"!==g(N)?(n(),u("div",q,[i(o,{data:g(N),showPagination:!1},null,8,["data"]),g(N)?.length?(n(),p(r,{key:0,totalCount:g(_),pageNumber:g(k),onPageNumberChange:x},null,8,["totalCount","pageNumber"])):d("",!0)])):(n(),p(v,{key:1,description:"当前歌手暂无歌曲",class:"tip",style:{"margin-top":"60px"},size:"large"}))])),_:1})])}}};export{w as default};
